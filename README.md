# Veracity Spearhead Provenance Viewer Browser Extension

This repo extends the Chrome browser extension from [Jayen's original fork](https://github.com/Jayman874/DOM-Instrumentation-to-Display-Provenance-Data) to pick up provenance information from `provenance-id` headers in server-generated HTTP responses, and display them to the user in a simple overlay UI. The server, typically a web app, must generate these headers somehow; for a Java web app, one way to do so is by using our [provenance injector Java agent](https://github.com/veracitylab/provenance-injector).

## Usage

1. Download or clone this repo.
2. In a Chrome-compatible browser (e.g., Google Chrome, Chromium, MS Edge, Opera), install the extension located in `Browser Plugin/Display Headers Test` using "Load Unpacked" (enable Developer Mode first if necessary).
3. All subsequently opened pages will display a small `▶ Prov` button in the top-left corner. Clicking it will toggle the display of provenance-enriched HTTP responses generated by this page -- including the original page load, contained resources such as images, and any `XMLHttpRequest` or `fetch()` requests generated programmatically.

## Example

The [Movie Recommender demo](https://github.com/veracitylab/provenance-demonstrator-movie) is a Spring Boot app to which the [provenance injector](https://github.com/veracitylab/provenance-injector) can be applied.

After loading the browser extension in Chromium, starting the web app with the provenance injector agent attached (TODO: more detail), logging into the app at `http://localhost:8080/`, navigating to the Library page, and clicking `▶ Prov` in the top-left corner:

![image](https://github.com/Jayman874/DOM-Instrumentation-to-Display-Provenance-Data/assets/11490991/35527370-329b-4492-8543-7085b2457b22)

Clicking on a movie triggers an `XMLHttpRequest` back to the server, which is added to the list of provenance-enriched responses in the overlay UI. Clicking it pops up a new tab showing the provenance data collected automatically by the agent during server-side processing of that request:

![image](https://github.com/veracitylab/DOM-Instrumentation-to-Display-Provenance-Data/assets/11490991/5dd51edc-8591-4b26-a69d-5b48b8ddef71)
